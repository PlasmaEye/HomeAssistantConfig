- alias: "Outdoor Lights On When Dark"
  trigger: 
    platform: numeric_state
    entity_id: sun.sun
    value_template: "{{ state.attributes.elevation }}"
    below: -4.0
  action:
    service: switch.turn_on
    entity_id: 
      - switch.front_door_south_switch
      - switch.garage_sconces_switch

- alias: "Outdoor Lights Off When Light"
  trigger:
    platform: numeric_state
    entity_id: sun.sun
    value_template: "{{ state.attributes.elevation }}"
    above: -4.0
  action:
    service: switch.turn_off
    entity_id: 
      - switch.front_door_south_switch
      - switch.garage_sconces_switch

- alias: "Switch Kitchen Under Cabinet Lights On"
  trigger:
    platform: state
    entity_id: switch.kitchen_south_switch
    to: 'on'
  action:
    service: light.turn_on
    entity_id: 
      - light.kitchen_light_controller

- alias: "Switch Kitchen Under Cabinet Lights Off"
  trigger:
    platform: state
    entity_id: switch.kitchen_south_switch
    to: 'off'
  action:
    service: light.turn_off
    entity_id: 
      - light.kitchen_light_controller

- alias: "Dim theater lights for movies"
  trigger:
    - platform: state
      entity_id: sensor.harmony_hub
      to: 'Watch Netflix/Hulu/Plex/Amazon'
    - platform: state
      entity_id: sensor.harmony_hub
      to: 'Watch a Movie'
  condition:
    condition: state
    entity_id: light.home_theater_west_dimmer
    state: 'on'
  action:
    - service: light.turn_on
      entity_id: light.home_theater_west_dimmer
      data:
        brightness_pct: 10
        transition: 3

- alias: "Change light color for watching TV"
  trigger:
    - platform: state
      entity_id: sensor.harmony_hub
      to: 'Watch Netflix/Hulu/Plex/Amazon'
    - platform: state
      entity_id: sensor.harmony_hub
      to: 'Watch a Movie'
    - platform: state
      entity_id: sensor.harmony_hub
      to: 'Watch TV'
    - platform: state
      entity_id: sensor.harmony_hub
      to: 'Play Steam Link'
    - platform: state
      entity_id: sensor.harmony_hub
      to: 'Watch Switch'  
  action:
    - service: light.turn_on
      entity_id: light.basement_rgbw_controller_main
      data:
        rgb_color: [255, 63, 0]
        transition: 5
        white_value: 0

- alias: "Brighten lights when done watching TV"
  trigger:
    - platform: state
      entity_id: sensor.harmony_hub
      to: 'PowerOff'
  condition:
    condition: state
    entity_id: light.home_theater_west_dimmer
    state: 'on'
  action:
    - service: light.turn_on
      entity_id: light.home_theater_west_dimmer
      data:
        brightness_pct: 100
        transition: 3
    - service: light.turn_on
      entity_id: light.basement_rgbw_controller_main
      data:
        rgb_color: [255, 255, 255]
        transition: 5
        white_value: 255

- alias: "Change light color when done watching TV"
  trigger:
    - platform: state
      entity_id: sensor.harmony_hub
      to: 'PowerOff'
  action:
    - service: light.turn_on
      entity_id: light.basement_rgbw_controller_main
      data:
        rgb_color: [255, 255, 255]
        transition: 5
        white_value: 255